<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="admin :: head">
</head>
<body>
	<nav th:replace="admin :: header"></nav>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-6">
				<button class="btn btn-success btn-add-edit" data-toggle="modal" data-target="#addItem">Thêm mặt hàng</button>
				<h3 th:if="${notFoundItem}" th:text="${notFoundItem}"></h3>
				<div class="panel panel-success">
					<div class="panel-heading"><h3>Các loại mặt hàng</h3></div>
					<div class="panel-body">
						<table class="table table-bordered table-hover">
							<thead>
								<tr>
									<td>STT</td>
									<td>Tên mặt hàng</td>
									<td>Ngày tạo</td>
									<td>Ngày sửa</td>
									<td>Đơn giá (/chiếc)</td>
									<td>Trạng thái</td>
									<td>Nguyên liệu</td>
									<td>Sửa / Xóa</td>
								</tr>
							</thead>
							<tbody>
								<th:block th:unless="${#lists.isEmpty(items)}">
									<tr th:each="ITEM , iterStat : ${items}">
										<td th:text="${iterStat.count}"></td>
										<td th:text="${ITEM.itemName}"></td>
										<td th:text="${ITEM.itemDateCreated}"></td>
										<td th:text="${ITEM.itemDateUpdated}"></td>
										<td th:text="${ITEM.itemSingleValue}"></td>
										<td th:text="${ITEM.itemStatus}"></td>
										<td th:text="${ITEM.materials}"></td>
										<td>
											<button data-toggle="modal" class="btn-add-edit" data-target="#editItem"
											th:attr="data-code=${ITEM.itemCode}, data-name=${ITEM.itemName}, data-singleValue=${ITEM.itemSingleValue},
											data-date=${ITEM.itemDateCreated}, data-materials=${ITEM.materials}" ><span>Sửa</span></button>
											<a th:href="@{/admin/deleteItem(id=${ITEM.itemCode})}"><span>Xóa</span></a>
										</td>
									</tr>
								</th:block>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<button class="btn btn-success" data-toggle="modal" data-target="#addMaterial">Thêm nguyên liệu</button>
				<h3 th:if="${notFoundMaterial}" th:text="${notFoundMaterial}"></h3>
				<div class="panel panel-default">
					<div class="panel-heading"><h3>Các loại nguyên liệu hiện tại</h3></div>
					<div class="panel-body">
						<table class="table table-bordered table-hover">
							<thead>
								<tr>
									<td>STT</td>
									<td>Tên</td>
									<td>Ngày tạo</td>
									<td>Ngày cập nhật</td>
									<td>Đơn giá (/kg)</td>
									<td>Số lượng trong kho (/kg)</td>
									<td>Tên nhà cung cấp</td>
									<td>Sđt nhà cung cấp</td>
									<td>Trạng thái</td>
									<td>Sửa / Xóa</td>
								</tr>
							</thead>
							<tbody>
								<th:block th:unless="${#lists.isEmpty(materials)}">
									<tr th:each="MATERIAL, iterStat : ${materials}">
										<td th:text="${iterStat.count}"></td>
										<td th:text="${MATERIAL.materialName}"></td>
										<td th:text="${MATERIAL.materialDateCreated}"></td>
										<td th:text="${MATERIAL.materialDateUpdated}"></td>
										<td th:text="${MATERIAL.materialSingleValue}"></td>
										<td th:text="${MATERIAL.materialRemain}"></td>
										<td th:text="${MATERIAL.materialSupplyName}"></td>
										<td th:text="${MATERIAL.materialSupplyPhone}"></td>
										<td th:text="${MATERIAL.materialStatus}"></td>
										<td>
											<button data-toggle="modal" data-target="#editMaterial"
											th:attr="data-code=${MATERIAL.materialCode}, data-name=${MATERIAL.materialName}, data-datecreated=${MATERIAL.materialDateCreated},
											data-singlevalue=${MATERIAL.materialSingleValue}, data-remain=${MATERIAL.materialRemain}, 
											data-supplyname=${MATERIAL.materialSupplyName}, data-supplyphone=${MATERIAL.materialSupplyPhone}"><span>Sửa</span></button>
											<a th:href="@{/admin/deleteMaterial(materialCode=${MATERIAL.materialCode})}"><span>Xóa</span></a>
										</td>
									</tr>
								</th:block>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div th:if="${itemForm}" id="addItem" class="modal modal-style fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title" align="center"><b>Thêm mặt hàng</b></h4>
				</div>
				<div class="modal-body form-style">
					<form action="#" id="addItemForm" th:action="@{/admin/createItem}" th:object="${itemForm}" method="post">
						<div class="form-group">
							<label><b>Tên mặt hàng</b></label>
                             <p th:if="${#fields.hasErrors('itemName')}" th:errors="*{itemName}"></p>
							<input type="text" class="form-control" th:field="*{itemName}" placeholder="Tên mặt hàng" />
                             
                             <label><b>Đơn giá (/chiếc)</b></label>
                             <p th:if="${#fields.hasErrors('itemSingleValue')}" th:errors="*{itemSingleValue}"></p>
							<input type="text" class="form-control" th:field="*{itemSingleValue}" placeholder="Đơn giá" />
                             
                             <label><b>Các nguyên liệu</b></label>
                             <br/>
                             <button type="button" class="btn-success" id="btn-newMaterial"><span class="glyphicon glyphicon-plus-sign">Thêm nguyên liệu</span></button>
                            	<div id="newMaterial" th:unless="${#lists.isEmpty(materials)}">
                            		<select id="select_material1" class="selectpicker">
                            			<option value="0">Lựa chọn nguyên liệu</option>
                            			<option th:each="MATERIAL,iterStat : ${materials}" th:text="${MATERIAL.materialName}" th:value="${MATERIAL.materialCode}"></option>
                            		</select>
                            		<button type="button" class="btn btn_ok" id="btn-ok1" onClick="saveMaterial(1)"><span class="glyphicon glyphicon-ok"></span></button>
                            		<button type="button" class="btn btn_remove" id="btn-remove1" onClick="deleteMaterial(1)" disabled="disabled"><span class="glyphicon glyphicon-remove"></span></button>
                            	</div>
							<button th:unless="${#lists.isEmpty(materials)}" type="submit">Thêm mặt hàng</button>
						</div>
					</form>
				</div>
			</div>
		</div>		
	</div>
	<div th:if="${itemForm}" id="editItem" class="modal modal-style fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title" align="center"><b>Thêm mặt hàng</b></h4>
				</div>
				<div class="modal-body form-style">
					<form action="#" id="editItemForm" th:action="@{/admin/createItem}" th:object="${itemForm}" method="post">
						<div class="form-group">
							<input type="hidden" id="item_code" th:field="*{itemCode}"/>
							<input type="hidden" id="item_date_created" th:field="*{itemDateCreated}"/>
							<label><b>Tên mặt hàng</b></label>
							<p th:if="${#fields.hasErrors('itemName')}" th:errors="*{itemName}"></p>
							<input type="text" id="item_name" class="form-control" th:field="*{itemName}" placeholder="Tên mặt hàng" />
                             
                             <label><b>Đơn giá (/chiếc)</b></label>
                             <p th:if="${#fields.hasErrors('itemSingleValue')}" th:errors="*{itemSingleValue}"></p>
							<input type="text" id="item_single_value" class="form-control" th:field="*{itemSingleValue}" placeholder="Đơn giá" />
                             
                             <label><b>Các nguyên liệu</b></label>
                             <br/>
                            	<div id="edit_newMaterial" th:unless="${#lists.isEmpty(materials)}">
                         	
                            	</div>
							<br/><button th:unless="${#lists.isEmpty(materials)}" type="submit">Sửa mặt hàng</button>
						</div>
					</form>
				</div>
			</div>
		</div>		
	</div>
	<div th:if="${materialForm}" id="addMaterial" class="modal modal-style fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title" align="center"><b>Thêm nguyên liệu mới</b></h4>
				</div>
				<div class="modal-body form-style">
					<form id="addMaterialForm" th:action="@{/admin/createMaterial}" th:object="${materialForm}" method="post">
						<div class="form-group">
							<label><b>Tên nguyên liệu</b></label>
                             <p th:if="${#fields.hasErrors('materialName')}" th:errors="*{materialName}"></p>
							<input type="text" id="add-material-name" class="form-control" th:field="*{materialName}" placeholder="Tên nguyên liệu" />
							
                             
							<label><b>Đơn giá (/kg)</b></label>
                             <p th:if="${#fields.hasErrors('materialSingleValue')}" th:errors="*{materialSingleValue}"></p>
							<input type="text" id="add-material-singleValue" class="form-control" th:field="*{materialSingleValue}" placeholder="Đơn giá (/kg)" />
							
                             
							<label><b>Số lượng trong kho (/kg)</b></label>
                             <p th:if="${#fields.hasErrors('materialRemain')}" th:errors="*{materialRemain}"></p>
							<input type="text" id="add-material-remain" class="form-control" th:field="*{materialRemain}" placeholder="Số lượng trong kho (/kg)" />
							
                             
							<label><b>Nhà cung cấp</b></label>
                             <p th:if="${#fields.hasErrors('materialSupplyName')}" th:errors="*{materialSupplyName}"></p>
							<input type="text" id="add-material-supplyName" class="form-control" th:field="*{materialSupplyName}" placeholder="Nhà cung cấp" />
							
                             
							<label><b>Số điện thoại nhà cung cấp</b></label>
                             <p th:if="${#fields.hasErrors('materialSupplyPhone')}" th:errors="*{materialSupplyPhone}"></p>
							<input type="text" id="add-material-supplyPhone" class="form-control" th:field="*{materialSupplyPhone}" placeholder="Sđt nhà cung cấp" />
							
                             
							<button type="submit" id="submit-add-material">Thêm</button>
						</div>
					</form>
				</div>
			</div>
		</div>		
	</div>
	<div th:if="${materialForm}" id="editMaterial" class="modal modal-style fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title" align="center"><b>Sửa nguyên liệu</b></h4>
				</div>
				<div class="modal-body form-style">
					<form action="#" id="editMaterialForm" th:action="@{/admin/createMaterial}" th:object="${materialForm}" method="post">
						<div class="form-group">
							<input type="hidden" id="material-code" th:field="*{materialCode}"/>
							
							<label><b>Tên nguyên liệu</b></label>
                             <p th:if="${#fields.hasErrors('materialName')}" th:errors="*{materialName}"></p>
							<input type="text" id="material-name" class="form-control" th:field="*{materialName}" placeholder="Tên nguyên liệu" />
							<br/>
                             
                             <input type="hidden" id="material-date-created" th:field="*{materialDateCreated}"/>
                             
							<label><b>Đơn giá (/kg)</b></label>
                             <p th:if="${#fields.hasErrors('materialSingleValue')}" th:errors="*{materialSingleValue}"></p>
							<input type="text" id="material-singleValue" class="form-control" th:field="*{materialSingleValue}" placeholder="Đơn giá (/kg)" />
							<br/>
                             
							<label><b>Số lượng trong kho (/kg)</b></label>
                             <p th:if="${#fields.hasErrors('materialRemain')}" th:errors="*{materialRemain}"></p>
							<input type="text" id="material-remain" class="form-control" th:field="*{materialRemain}" placeholder="Số lượng trong kho (/kg)" />
							<br/>
                             
							<label><b>Nhà cung cấp</b></label>
                             <p th:if="${#fields.hasErrors('materialSupplyName')}" th:errors="*{materialSupplyName}"></p>
							<input type="text" id="material-supplyName" class="form-control" th:field="*{materialSupplyName}" placeholder="Nhà cung cấp" />
							<br/>
                             
							<label><b>Số điện thoại nhà cung cấp</b></label>
                             <p th:if="${#fields.hasErrors('materialSupplyPhone')}" th:errors="*{materialSupplyPhone}"></p>
							<input type="text" id="material-supplyPhone" class="form-control" th:field="*{materialSupplyPhone}" placeholder="sđt nhà cung cấp" />
                             
							<button type="submit" id="submit-edit-material">Sửa</button>
						</div>
					</form>
				</div>
			</div>
		</div>		
	</div>
	<footer th:replace="admin :: footer"></footer>
	<script src="/js/item-material.js" th:src="@{/js/item-material.js}"></script>
</body>
</html>